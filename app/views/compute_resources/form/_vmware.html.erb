<%= text_f f, :server, :label => "VCenter/Server", :class => "input-xlarge" %>
<%= text_f f, :user %>
<%= password_f f, :password %>
<% datacenters = (f.object.uuid.nil? && controller.action_name != 'test_connection')  ? [] : f.object.datacenters rescue []%>
<%= selectable_f(f, :uuid, datacenters, {}, {:label => 'Datacenter',
                 :help_inline => link_to_function(datacenters.empty? ? "Load Datacenters" : "Test Connection", "testConnection(this)",
                 :class => "btn + #{datacenters.empty? ? "" : "btn-success"}",
                 :'data-url' => test_connection_compute_resources_path) + image_tag('/assets/spinner.gif', :id => 'test_connection_indicator', :class => 'hide').html_safe }) %>
